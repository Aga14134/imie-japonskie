<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Twoje imię po japońsku!</title>
  <style>
    body {
      font-family: sans-serif;
      max-width: 500px;
      margin: 40px auto;
      padding: 20px;
      border: 2px solid #ccc;
      border-radius: 12px;
      text-align: center;
    }
    input {
      padding: 10px;
      width: 80%;
      font-size: 1rem;
    }
    button {
      padding: 10px 20px;
      font-size: 1rem;
      margin-top: 10px;
      cursor: pointer;
    }
    .result {
      margin-top: 20px;
      font-size: 1.2rem;
    }
    .kana-display {
      font-size: 2rem;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>Wpisz swoje imię:</h2>
  <input type="text" id="nameInput" placeholder="Np. Agnieszka">
  <br>
  <button onclick="convertName()">Pokaż po japońsku!</button>
  <div class="result" id="result"></div>

  <script>
    const syllableMap = {
      "a": { kana: "ア", roma: "a" },
      "b": { kana: "ブ", roma: "bu" },
      "c": { kana: "ク", roma: "ku" },
      "cz": { kana: "チ", roma: "chi" },
      "d": { kana: "ド", roma: "do" },
      "e": { kana: "エ", roma: "e" },
      "f": { kana: "フ", roma: "fu" },
      "g": { kana: "グ", roma: "gu" },
      "h": { kana: "ハ", roma: "ha" },
      "i": { kana: "イ", roma: "i" },
      "j": { kana: "ジ", roma: "ji" },
      "k": { kana: "カ", roma: "ka" },
      "l": { kana: "ル", roma: "ru" },
      "ł": { kana: "ウ", roma: "u" },
      "m": { kana: "ム", roma: "mu" },
      "n": { kana: "ン", roma: "n" },
      "ń": { kana: "ニ", roma: "ni" },
      "o": { kana: "オ", roma: "o" },
      "ó": { kana: "オー", roma: "ō" },
      "p": { kana: "プ", roma: "pu" },
      "r": { kana: "ル", roma: "ru" },
      "s": { kana: "ス", roma: "su" },
      "sz": { kana: "シ", roma: "shi" },
      "ś": { kana: "シ", roma: "shi" },
      "t": { kana: "ト", roma: "to" },
      "u": { kana: "ウ", roma: "u" },
      "w": { kana: "ウ", roma: "u" },
      "y": { kana: "イ", roma: "i" },
      "z": { kana: "ズ", roma: "zu" },
      "ź": { kana: "ジ", roma: "ji" },
      "ż": { kana: "ジュ", roma: "ju" },
      "ni": { kana: "ニ", roma: "ni" },
      "gn": { kana: "ニェ", roma: "nye" },
      "rz": { kana: "ジ", roma: "ji" },
      "ch": { kana: "ヒ", roma: "hi" }
    };

    function convertToKanaAndRomaji(name) {
      name = name.toLowerCase();
      let kana = "";
      let roma = "";
      let kanaBreakdown = [];
      let i = 0;
      while (i < name.length) {
        let found = false;
        // Spróbuj dopasować 2-znakową sekwencję
        if (i + 1 < name.length) {
          let pair = name.slice(i, i + 2);
          if (syllableMap[pair]) {
            kana += syllableMap[pair].kana;
            roma += syllableMap[pair].roma;
            kanaBreakdown.push(pair + " → " + syllableMap[pair].kana);
            i += 2;
            found = true;
            continue;
          }
        }
        // Spróbuj pojedynczy znak
        let single = name.charAt(i);
        if (syllableMap[single]) {
          kana += syllableMap[single].kana;
          roma += syllableMap[single].roma;
          kanaBreakdown.push(single + " → " + syllableMap[single].kana);
        } else {
          kana += single;
          roma += single;
          kanaBreakdown.push(single + " → ?");
        }
        i++;
      }
      return { kana, roma, kanaBreakdown };
    }

    function convertName() {
      const input = document.getElementById("nameInput").value.trim();
      if (!input) {
        document.getElementById("result").innerHTML = "Proszę wpisz imię.";
        return;
      }
      const { kana, roma, kanaBreakdown } = convertToKanaAndRomaji(input);
      document.getElementById("result").innerHTML =
        `<p><strong>Katakana:</strong> <span class="kana-display">${kana}</span></p>
         <p><strong>Romaji:</strong> ${roma.charAt(0).toUpperCase() + roma.slice(1)}</p>
         <p><strong>Rozbicie znaków:</strong><br>${kanaBreakdown.join('<br>')}</p>`;
    }
  </script>
</body>
</html>

